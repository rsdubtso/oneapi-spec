

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Normalization &mdash; oneAPI Specification 0.8 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/favicons.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Batch normalization" href="batch_normalization.html" />
    <link rel="prev" title="Matrix Multiplication" href="matmul.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneAPI Specification
          

          
            
            <img src="../../../../_static/oneAPI-rgb-rev-100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../library-interop.html">Library Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../elements.html">oneAPI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dpcpp/source/index.html">DPC++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDPL/source/index.html">oneDPL</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">oneDNN</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conventions.html">Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../execution_model/index.html">Execution Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_model/index.html">Data model</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Primitives</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="general.html">Common definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributes/index.html">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="binary.html">Binary</a></li>
<li class="toctree-l3"><a class="reference internal" href="concat.html">Concat</a></li>
<li class="toctree-l3"><a class="reference internal" href="convolution.html">Convolution and Deconvolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="eltwise.html">Elementwise</a></li>
<li class="toctree-l3"><a class="reference internal" href="inner-product.html">Inner Product</a></li>
<li class="toctree-l3"><a class="reference internal" href="layer_normalization.html">Layer normalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="logsoftmax.html">LogSoftmax</a></li>
<li class="toctree-l3"><a class="reference internal" href="lrn.html">Local Response Normalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="matmul.html">Matrix Multiplication</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Normalization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="batch_normalization.html">Batch normalization</a></li>
<li class="toctree-l4"><a class="reference internal" href="layer_normalization.html">Layer normalization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pooling.html">Pooling</a></li>
<li class="toctree-l3"><a class="reference internal" href="reorder.html">Reorder</a></li>
<li class="toctree-l3"><a class="reference internal" href="resampling.html">Resampling</a></li>
<li class="toctree-l3"><a class="reference internal" href="rnn.html">RNN</a></li>
<li class="toctree-l3"><a class="reference internal" href="shuffle.html">Shuffle</a></li>
<li class="toctree-l3"><a class="reference internal" href="softmax.html">Softmax</a></li>
<li class="toctree-l3"><a class="reference internal" href="sum.html">Sum</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#id1">Open Source Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#implementation-notes">Implementation Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneCCL/source/index.html">oneCCL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../l0/source/index.html">Level Zero</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDAL/source/index.html">oneDAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneTBB/source/nested-index.html">oneTBB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneVPL/source/index.html">oneVPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneMKL/source/index.html">oneMKL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versions.html">HTML and PDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../notices.html">Legal Notices and Disclaimers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">oneAPI Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">oneAPI Specification</a> &raquo;</li>
        
          
          <li><a href="../index.html">oneDNN</a> </li>
          
        
          
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/oneapi-src/oneapi-spec/blob/master/source/elements/oneDNN/source/primitives/normalization.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="normalization">
<span id="normalization-label"></span><h1>Normalization<a class="headerlink" href="#normalization" title="Permalink to this headline">Â¶</a></h1>
<p>Normalization primitives smoothen and center the data around statistics
computed for certain slices of the data. They use common
<a class="reference internal" href="#_CPPv4N4dnnl19normalization_flagsE" title="dnnl::normalization_flags"><code class="xref cpp cpp-any docutils literal notranslate"><span class="pre">dnnl::normalization_flags</span></code></a> to control their behavior.</p>
<p>oneDNN supports the following normalization primitives:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="batch_normalization.html">Batch normalization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="batch_normalization.html#forward">Forward</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batch_normalization.html#difference-between-forward-training-and-forward-inference">Difference Between Forward Training and Forward Inference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batch_normalization.html#backward">Backward</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch_normalization.html#execution-arguments">Execution Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch_normalization.html#operation-details">Operation Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch_normalization.html#data-type-support">Data Type Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch_normalization.html#data-representation">Data Representation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="batch_normalization.html#source-destination-and-their-gradients">Source, Destination, and Their Gradients</a></li>
<li class="toctree-l3"><a class="reference internal" href="batch_normalization.html#statistics-tensors">Statistics Tensors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batch_normalization.html#post-ops-and-attributes">Post-ops and Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch_normalization.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="layer_normalization.html">Layer normalization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="layer_normalization.html#forward">Forward</a><ul>
<li class="toctree-l3"><a class="reference internal" href="layer_normalization.html#difference-between-forward-training-and-forward-inference">Difference Between Forward Training and Forward Inference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="layer_normalization.html#backward">Backward</a></li>
<li class="toctree-l2"><a class="reference internal" href="layer_normalization.html#execution-arguments">Execution Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="layer_normalization.html#operation-details">Operation Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="layer_normalization.html#data-type-support">Data Type Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="layer_normalization.html#data-representation">Data Representation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="layer_normalization.html#mean-and-variance">Mean and Variance</a></li>
<li class="toctree-l3"><a class="reference internal" href="layer_normalization.html#scale-and-shift">Scale and Shift</a></li>
<li class="toctree-l3"><a class="reference internal" href="layer_normalization.html#source-destination-and-their-gradients">Source, Destination, and Their Gradients</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="layer_normalization.html#api">API</a></li>
</ul>
</li>
</ul>
</div>
<p class="rubric">Normalization primitives flags</p>
<dl class="cpp enum">
<dt id="_CPPv4N4dnnl19normalization_flagsE">
<span id="_CPPv3N4dnnl19normalization_flagsE"></span><span id="_CPPv2N4dnnl19normalization_flagsE"></span><span class="target" id="group__dnnl__api__primitives__common_1gad8ef0fcbb7b10cae3d67dd46892002be"></span><em class="property">enum </em><code class="sig-prename descclassname">dnnl<code class="sig-prename descclassname">::</code></code><code class="sig-name descname">normalization_flags</code><a class="headerlink" href="#_CPPv4N4dnnl19normalization_flagsE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Flags for normalization primitives (can be combined via â|â) </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt id="_CPPv4N4dnnl19normalization_flags4noneE">
<span id="_CPPv3N4dnnl19normalization_flags4noneE"></span><span id="_CPPv2N4dnnl19normalization_flags4noneE"></span><span class="target" id="group__dnnl__api__primitives__common_1ggad8ef0fcbb7b10cae3d67dd46892002bea334c4a4c42fdb79d7ebc3e73b517e6f8"></span><em class="property">enumerator </em><code class="sig-name descname">none</code><a class="headerlink" href="#_CPPv4N4dnnl19normalization_flags4noneE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Use no normalization flags. If specified, the library computes mean and variance on forward propagation for training and inference, outputs them on forward propagation for training, and computes the respective derivatives on backward propagation. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N4dnnl19normalization_flags16use_global_statsE">
<span id="_CPPv3N4dnnl19normalization_flags16use_global_statsE"></span><span id="_CPPv2N4dnnl19normalization_flags16use_global_statsE"></span><span class="target" id="group__dnnl__api__primitives__common_1ggad8ef0fcbb7b10cae3d67dd46892002bea95768ff8afb8ee75dc24be0d307627f8"></span><em class="property">enumerator </em><code class="sig-name descname">use_global_stats</code> = 0x1u<a class="headerlink" href="#_CPPv4N4dnnl19normalization_flags16use_global_statsE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Use global statistics. If specified, the library uses mean and variance provided by the user as an input on forward propagation and does not compute their derivatives on backward propagation. Otherwise, the library computes mean and variance on forward propagation for training and inference, outputs them on forward propagation for training, and computes the respective derivatives on backward propagation. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N4dnnl19normalization_flags15use_scale_shiftE">
<span id="_CPPv3N4dnnl19normalization_flags15use_scale_shiftE"></span><span id="_CPPv2N4dnnl19normalization_flags15use_scale_shiftE"></span><span class="target" id="group__dnnl__api__primitives__common_1ggad8ef0fcbb7b10cae3d67dd46892002bea0cbad8a346551ec47da7ff1afb1e1f76"></span><em class="property">enumerator </em><code class="sig-name descname">use_scale_shift</code> = 0x2u<a class="headerlink" href="#_CPPv4N4dnnl19normalization_flags15use_scale_shiftE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Use scale and shift parameters. If specified, the user is expected to pass scale and shift as inputs on forward propagation. On backward propagation of type <a class="reference internal" href="general.html#group__dnnl__api__attributes_1ggac7db48f6583aa9903e54c2a39d65438fa195fe59b6f103787a914aead0f3db502"><span class="std std-ref">dnnl::prop_kind::backward</span></a>, the library computes their derivatives. If not specified, the scale and shift parameters are not used by the library in any way. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N4dnnl19normalization_flags14fuse_norm_reluE">
<span id="_CPPv3N4dnnl19normalization_flags14fuse_norm_reluE"></span><span id="_CPPv2N4dnnl19normalization_flags14fuse_norm_reluE"></span><span class="target" id="group__dnnl__api__primitives__common_1ggad8ef0fcbb7b10cae3d67dd46892002bea898ce555425ee54271096bc9c8e0400c"></span><em class="property">enumerator </em><code class="sig-name descname">fuse_norm_relu</code> = 0x4u<a class="headerlink" href="#_CPPv4N4dnnl19normalization_flags14fuse_norm_reluE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Fuse normalization with ReLU. On training, normalization will require the workspace to implement backward propagation. On inference, the workspace is not required and behavior is the same as when normalization is fused with ReLU using the post-ops API. </p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="batch_normalization.html" class="btn btn-neutral float-right" title="Batch normalization" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="matmul.html" class="btn btn-neutral float-left" title="Matrix Multiplication" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Intel Corporation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>